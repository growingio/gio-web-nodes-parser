var e=function(){return e=Object.assign||function(e){for(var t,n=1,i=arguments.length;i>n;n++)for(var r in t=arguments[n])({}).hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},e.apply(this,arguments)};function t(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function n(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function i(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;o>r;r++)!i&&r in t||(i||(i=[].slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||[].slice.call(t))}function r(e){return[].slice.call(e)}function o(e){try{return e()}catch(e){return}}function a(e,t){return function(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}(e)===t}function s(e){return a(e,"number")}function u(e){return a(e,"object")&&!function(e){return a(e,"undefined")||a(e,"null")}(e)}function c(e){return Array.isArray(e)&&a(e,"array")}function l(e,t){return!(!c(e)&&!function(e){return a(e,"string")}(e)||0>e.indexOf(t))}function d(e){return u(e)?Object.keys(e):[]}function f(e){return c(e)?0===e.length:u(e)?0===d(e).length:!e}"function"==typeof SuppressedError&&SuppressedError;var h=["body","br","canvas","clippath","defs","desc","g","hr","html","iframe","math","param","path","rect","script","style","text","title","tspan","use"],g=["button","reset","submit"],v=i(i([],n(g),!1),["file"],!1),p=["checkbox","color","radio","range"],m=i(i([],n(p),!1),["date","datetime-local","month","number","password","text","time","week"],!1),N=["tr","li","dt","dd"],w=i(["a","button","dl"],n(N),!1),L=["i","em","svg","img"],y=["i","span","em","b","strong","bdo"],x=/(^| |[^ ]+\-)(clear|clearfix|active|hover|enabled|current|selected|unselected|hidden|display|focus|disabled|undisabled|open|checked|unchecked|undefined|null|ng-|growing-)[^\. ]*/g,E=/^([a-zA-Z\-\_0-9]+)$/,b="data-growing-ignore",_="data-growing-container",C="data-growing-index",I="data-growing-title",T=function(e,t){var n;return null!==(n=o((function(){return e.hasAttribute(t)&&"false"!==e.getAttribute(t)})))&&void 0!==n?n:o((function(){return e.hasOwnProperty(t)}))},k=function(e,t){var n;return null!==(n=o((function(){return e.getAttribute(t)})))&&void 0!==n?n:o((function(){var n,i;return null===(i=null===(n=e.attributes)||void 0===n?void 0:n.getNamedItem(t))||void 0===i?void 0:i.value}))},S=function(e,t){if(!(e instanceof HTMLElement||e instanceof Element))return!1;if(T(e,b))return!1;var r=e.tagName.toLowerCase();if(l(h,r))return!1;if(!l(["circleClick","circleHover","click"],t))return!0;if("textarea"===r&&"click"===t)return!1;if("input"===r){var o=k(e,"type");if("click"===t&&!l(v,o))return!1;if(l(["circleClick","circleHover"],t)&&!l(i(i([],n(v),!1),n(m),!1),o))return!1}return M(e)||!function(e){if(!(null==e?void 0:e.children))return!1;if("svg"===e.tagName.toLowerCase())return!1;for(var t=[{node:e,depth:0}];t.length>0;){var n=t.shift(),i=n.node,r=n.depth;if(r>5)return!0;if(i.children)for(var o=0;o<i.children.length;o++)t.push({node:i.children[o],depth:r+1})}return!1}(e)},P=function(e,t){return void 0===t&&(t=!1),r((null==e?void 0:e.childNodes)||[]).filter((function(e){return l(t?[Node.ELEMENT_NODE,Node.TEXT_NODE]:[Node.ELEMENT_NODE],e.nodeType)}))},O=function(e){return D(e.parentElement)?null:e.parentElement},D=function(e){return!e||l(["BODY","HTML","#document"],e.tagName)},M=function(e){return T(e,_)||l(w,e.tagName.toLowerCase())||"input"===e.tagName.toLowerCase()&&l(g,e.type)},W=function(e){var t=P(e);return!f(t)&&t.every((function(e){var t=e.tagName.toLowerCase();return(l(L,t)||l(e.classList,"icon"))&&!j(e)}))},j=function(e){var t=P(e,!0);return!f(t)&&t.every((function(e){var t;return(e.nodeType===Node.TEXT_NODE||l(y,null===(t=e.tagName)||void 0===t?void 0:t.toLowerCase()))&&!!H(e)}))},A=function(e){if("svg"===e.tagName)return!0;var t=P(e),n=j(e);return f(t)||n},H=function(e){var t=P(e,!0).filter((function(e){var t;return e.nodeType===Node.TEXT_NODE||l(y,null===(t=e.tagName)||void 0===t?void 0:t.toLowerCase())})).map((function(e){return X(e.textContent,e.textContent.length)}));return X(function(e){if(c(e)){for(var t=[],n=0;n<e.length;n++){var i=e[n];i&&!f(i)&&t.push(i)}return t}return e}(t).join(" "))},X=function(e,t){return void 0===t&&(t=50),e&&(null==(e=e.replace(/[\n \t]+/g," ").trim())?void 0:e.length)?e.slice(0,s(t)&&t>0?t:void 0):""},V=/[^/]*\.(bmp|jpg|jpeg|png|gif|svg|psd|webp|apng)/gi,G=function(e,t){switch(t.toLowerCase()){case"a":return function(e){if(!T(e,"href"))return["",""];var t=k(e,"href");return!t||t.startsWith("javascript:")?["",""]:t.length>320?[t.slice(0,320),t]:[t,t]}(e);case"img":return function(e){var t,n=e.src;if(!n||n.includes("data:image"))return["",""];var i=n.match(V),r=null!==(t=null==i?void 0:i[0])&&void 0!==t?t:"";return r.includes("%")&&(r=r.substring(r.lastIndexOf("%")+3)),n.length>320?[n.slice(0,320),r]:[n,r]}(e);default:return["",""]}},U={a:function(e){var t=H(e);return t||(F(e)||G(e,"a")[0])},button:function(e){var t=k(e,"name");if(t)return t;var n=H(e);return n||(F(e)||Y(e))},img:function(e){return X(k(e,"alt"))||G(e,"img")[1]},input:function(e){if("password"===e.type)return"";var t,n,i=l(v,e.type),o=T(e,"data-growing-track");if(i||o)return X(e.value);if(l(p,e.type)){var a=void 0;return e.id&&(t=r(document.getElementsByTagName("label")),n=function(t){return t.htmlFor===e.id},a=t[function(e,t){var n=-1;if(c(e))for(var i=e.length-1,r=0;i>=r;r+=1)if(t(e[r]))return r;return n}(t,n)]),a||(a=z(e,(function(e){return"label"===e.tagName.toLowerCase()}))),q(e,a?H(a):X(e.value))}return""},label:function(e){var t=H(e);return t||(F(e)||Y(e))},select:function(e){var t=r(e.options).filter((function(e){return e.selected}));if(t.length>0){var n=t.map((function(e){return e.label}));return X(n.join(", "))}return X(e.value)},svg:function(e){var t;return P(e).some((function(e){var n;if(e.nodeType===Node.ELEMENT_NODE&&"use"===(null===(n=e.tagName)||void 0===n?void 0:n.toLowerCase())&&e.hasAttribute("xlink:href"))return t=e,!0})),t?t.getAttribute("xlink:href"):""},textarea:function(){return""},form:function(){return""}},B=new WeakMap,R=function(e,t){var n=t in U?U[t]:void 0;if(!n&&B.has(e))return B.get(e);var i=k(e,I);if(T(e,I)&&i){var r=X(i);return B.set(e,r),r}var o=k(e,"title");if(T(e,"title")&&o)return r=X(o),B.set(e,r),r;if(n)return n(e);var a=H(e);return a?(r=X(a),B.set(e,r),r):function(e){if("svg"===e.tagName)return!1;var t=P(e);return t.length>0&&t.every(A)}(e)&&!W(e)?(r=X(F(e)),B.set(e,r),r):W(e)?(r=X(Y(e)),B.set(e,r),r):(B.set(e,""),"")},Z=new WeakMap,z=function(e,t){if(Z.has(e))return Z.get(e);for(var n=e.parentElement;n&&!D(n);){if(t(n))return Z.set(e,n),n;var i=n.parentElement;if(!i)break;n=i}Z.set(e,void 0)},F=function(e){for(var t=P(e),n=[],i=0,r=t.length;r>i;i++){var o=t[i];if(j(o)){var a=H(o);if(a&&(n.push(a),n.join(" ").length>100))break}}return n.join(" ").slice(0,100)},Y=function(e,t){var n;if(void 0===t&&(t=0),3>=t)for(var i=P(e),r=0,o=i.length;o>r;r++){var a=i[r],s=R(a,null===(n=a.tagName)||void 0===n?void 0:n.toLowerCase());if(s)return s;var u=Y(a,t+1);if(u)return u;if(r>5&&0===t)break}},q=function(e,t){return l(["checkbox","radio"],e.type)?"".concat(t).concat(a(e.checked,"boolean")?"("+e.checked+")":""):t},$=function(){function e(o,a,s,u,c){void 0===u&&(u=!0),void 0===c&&(c=[]);var d,h,v,p=this;this.originNode=o,this.deviceInfo=a,this.actionType=s,this.isTrackable=u,this.parentNodes=c,this.isLimitViewport=!0,this._checkGioIndex=function(){var e=k(p.originNode,C);if(e){if(/^\d{1,10}$/.test(e)){var t=+e;if(t>0&&2147483647>t)return t}"string"==typeof p.actionType&&0>p.actionType.indexOf("circle")&&console.log("%c [GrowingIO]：".concat("".concat(e,"，index标记应为 大于 0 且小于 2147483647 的整数！")),"color: #F59E0B;")}},this._getDlIndex=function(){var e=O(p.originNode);if(e&&"dl"===e.tagName.toLowerCase()){var t=r(e.children).filter((function(e){return e.nodeType===Node.ELEMENT_NODE}));if(0!==t.length){var n=new Map,i=0;if(t.forEach((function(e){"dt"===e.tagName.toLowerCase()&&n.set(e,++i)})),"dt"===p.originNode.tagName.toLowerCase())return n.get(p.originNode)||void 0;if("dd"!==p.originNode.tagName.toLowerCase());else for(var o=t.indexOf(p.originNode);o>=0;){var a=t[o];if("dt"===a.tagName.toLowerCase())return n.get(a)||void 0;o--}}}},this._getListIndex=function(e){var t=e.findIndex((function(e){return e.isSameNode(p.originNode)}));if(t>-1)return p.peerNodes=e.filter((function(e){return!e.isSameNode(p.originNode)})),t+1},this._getIndex=function(){if(T(p.originNode,C))return p._checkGioIndex();if(l(["dd","dt"],p.tagName)){var e=p._getDlIndex();if(void 0!==e)return e}if(p.isPureList&&p._pureList){var t=p._getListIndex(p._pureList);if(void 0!==t)return t}if(p.isPseudoList&&p._pseudoList){var n=p._getListIndex(p._pseudoList);if(void 0!==n)return n}},this._isListNode=function(e){return e&&e.nodeType===Node.ELEMENT_NODE&&N.includes(e.tagName.toLowerCase())},this._getIsPureList=function(){if(p._pureList=[],!p._isListNode(p.originNode))return!1;for(var e=[],t=p.originNode.previousElementSibling;t&&p._isListNode(t);)e.unshift(t),t=t.previousElementSibling;e.push(p.originNode);for(var n=p.originNode.nextElementSibling;n&&p._isListNode(n);)e.push(n),n=n.nextElementSibling;return p._pureList=e,e.length>=1},this._getIsPseudoList=function(){var e=p._getSiblings(p.originNode);if(3>e.length)return!1;var t=p._findLongestUniformSequence(p.originNode,e);return t.length>=3&&(p._pseudoList=t.filter((function(e){return e instanceof Element})),p._pseudoList.length>=3)},this._getClassList=function(e){var n,i,r=k(e,"name");if(T(e,"name")&&r)return[r];var o=k(e,"class");if(!o)return[];var a=o.split(/\s+/);if(f(a))return[];var s=[];try{for(var u=t(a),c=u.next();!c.done;c=u.next()){var l=c.value;l&&!x.test(l)&&E.test(l)&&s.push(l)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return s.sort()},this._getCurrentXpath=function(){var e=["/",p.tagName];return p.id&&e.push("#",p.id),p.classList.length&&e.push(".",p.classList.join(".")),e.join("")},this._getIsContainer=(h=new Set(w),v=new Set(g),function(){return!!T(p.originNode,_)||!!h.has(p.tagName)||!("input"!==p.tagName||!v.has(p.originNode.type))}),this._getIsOutFlow=function(){return l(["fixed","sticky"],window.getComputedStyle(p.originNode).position)},this._getRect=function(){var e=p.originNode.getBoundingClientRect(),t=window.devicePixelRatio||1,n=window.getComputedStyle(p.originNode).transform,i=n&&"none"!==n,r=Math.round(e.top*t)/t,o=Math.round(e.left*t)/t,a=Math.round(e.width*t)/t,s=Math.round(e.height*t)/t;i&&(a=p.originNode.offsetWidth,s=p.originNode.offsetHeight);var u=p.deviceInfo,c=u.winHeight,l=u.winWidth;return{top:r=Math.max(0,Math.min(r,c)),left:o=Math.max(0,Math.min(o,l)),width:a=Math.max(0,Math.min(a,l-o)),height:s=Math.max(0,Math.min(s,c-r))}},this._getListItemViewStatus=function(){var e=p.parentNodes.find((function(e){var t=e.originNode;return t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth}));if(!e)return"";var t=e.rect,n=t.top,i=t.left,r=t.width,o=t.height,a=p.rect,s=a.top,u=a.left,c=i+r,l=n+o,d=u+a.width,f=s+a.height;return n>f||u>c||s>l||i>d?"OUTSIDE":n>s||i>u||f>l||d>c?"OBSCURED":"DISPLAYED"},this._getViewStatus=function(e){var i,r,o,a,s=p,u=s.originNode,c=s.rect,l=s.isPureList,d=s.isPseudoList,f=s.isLimitViewport,h=c.top,g=c.left,v=c.width,m=c.height,N=p.deviceInfo,w=N.winWidth,L=N.winHeight,y=window.getComputedStyle(u);if(0===Number(y.opacity)||"hidden"===y.visibility||"none"===y.display||0===u.offsetWidth||0===u.offsetHeight)return"HIDDEN";try{for(var x=t(e),E=x.next();!E.done;E=x.next()){var b=E.value;if(b.isTrackable&&"DISPLAYED"===b.viewStatus)return b.viewStatus}}catch(e){i={error:e}}finally{try{E&&!E.done&&(r=x.return)&&r.call(x)}finally{if(i)throw i.error}}if(l||d){var _=p._getListItemViewStatus();if(_)return _}if(!(L>h&&w>g&&v>0&&m>0))return"OUTSIDE";var C=[[g+1,h+1],[g+v-1,h+1],[g+1,h+m-1],[g+v-1,h+m-1],[g+v/2,h+m/2]];try{for(var I=t(C),T=I.next();!T.done;T=I.next()){var k=n(T.value,2),S=k[0],P=k[1];if(document.elementFromPoint(S,P)===u)return"DISPLAYED"}}catch(e){o={error:e}}finally{try{T&&!T.done&&(a=I.return)&&a.call(I)}finally{if(o)throw o.error}}return f&&(0>h+m||0>g+v)?"OUTSIDE":"OBSCURED"},this._getTriggerEvent=function(){return"input"===p.tagName&&l(m,p.originNode.type)||l(["select","textarea"],p.tagName)?"VIEW_CHANGE":"VIEW_CLICK"},this._getXParents=function(t,r){if(r.length>0)return i([],n(r),!1);for(var o=[],a=t.parentElement;a&&!D(a);)o.unshift(a),a=a.parentElement;return o.map((function(t){if(e.xNodeCache.has(t))return e.xNodeCache.get(t);var n=new e(t,void 0,p.actionType,S(t,p.actionType),[]);return e.xNodeCache.set(t,n),n}))},this.tagName=o.tagName.toLocaleLowerCase(),this.classList=this._getClassList(o),this.id=o.id,this.currentXpath=this._getCurrentXpath(),this.isIgnored=T(this.originNode,b),this.isContainer=this._getIsContainer(),this.isPureList=this._getIsPureList(),this.isPureList||(this.isPseudoList=this._getIsPseudoList()),this.index=this._getIndex(),this.hyperlink=G(o,this.tagName)[0],this.triggerEvent=this._getTriggerEvent(),this.isOutFlow=this._getIsOutFlow(),a&&(this.isLimitViewport=null===(d=a.isLimitViewport)||void 0===d||d,this.rect=this._getRect(),this.viewStatus=this._getViewStatus(c)),this.xParents=this._getXParents(o,c)}return Object.defineProperty(e.prototype,"content",{get:function(){return R(this.originNode,this.tagName)},enumerable:!1,configurable:!0}),e.prototype._findLongestUniformSequence=function(e,t){for(var r=[],o=[],a=!1,s=0;s<t.length;s++){var u=t[s];this._compareNodes(e,u)?(u===e&&(a=!0),0===o.length||t.indexOf(o[o.length-1])===s-1?o.push(u):(o.length>r.length&&a&&(r=i([],n(o),!1)),o=[u],a=u===e)):(o.length>r.length&&a&&(r=i([],n(o),!1)),o=[],a=!1)}return o.length>r.length&&a&&(r=i([],n(o),!1)),3>r.length?[]:r},e.prototype._getSiblings=function(e){return e instanceof Element?e.parentNode?r(e.parentNode.children).filter((function(e){return e instanceof Element})):[e]:[]},e.prototype._compareNodes=function(e,t,n){if(void 0===n&&(n=1),n>3)return!0;if(!(e instanceof Element&&t instanceof Element))return e===t;if(e.tagName.toLowerCase()!==t.tagName.toLowerCase())return!1;if(!this._compareArrays(this._getClassList(e),this._getClassList(t)))return!1;if(e.getAttribute("type")!==t.getAttribute("type"))return!1;var i=r(e.children),o=r(t.children);if(i.length!==o.length)return!1;for(var a=0;a<i.length;a++)if(!this._compareNodes(i[a],o[a],n+1))return!1;return!0},e.prototype._compareArrays=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},e.xNodeCache=new WeakMap,e}(),K=function(){function e(t,r,o,a,u){var c=this;this.origin=t,this.action=r,this.lengthThreshold=o,this.deviceInfo=a,this.parentNode=u,this.updateNodesIndex=function(e,t){e.length&&s(t)&&e.forEach((function(e){return e.index=t}))},this.trackNodes=function(){if(!c.isTrackable)return[];var e=[c.xNode];if(l(["click","circleClick"],c.actionType))for(var t=c._getParent();t;){var n=t.xNode;if(!n||n.isIgnored)return[];t.isTrackable&&e.push(n),t=t._getParent()}for(var i=[],r=0,o=0;o<e.length;o++){var a=e[o],s=0===o;if(T(a.originNode,_)){i.unshift(c.getGioNodeInfo(a)),c.updateNodesIndex(i,a.index);break}var u=a.isContainer||a.isPureList||a.isPseudoList;(s||u&&1>r)&&(i.unshift(c.getGioNodeInfo(a)),u&&(c.updateNodesIndex(i,a.index),s||r++))}return i},this.getGioNodeInfo=function(t){var n;if(e.nodeInfoCache.has(t))return e.nodeInfoCache.get(t);var i=c.computeXpath(t),r=i.skeleton,o={skeleton:r,xpath:r,fullXpath:i.fullXpath,xcontent:i.xcontent,hyperlink:t.hyperlink,index:t.index,peerNodes:null!==(n=t.peerNodes)&&void 0!==n?n:[],content:X(t.content),triggerEvent:t.triggerEvent,originNode:t.originNode};return e.nodeInfoCache.set(t,o),o},this.computeXpath=function(t){var r,o=e.xpathCache.get(t);if(o)return o;var a="/".concat(t.tagName),s=t.id?"#".concat(t.id):"",u=f(t.classList)?"":".".concat(t.classList.join(".")),l=[a],d=["/".concat(s+u||"-")],h=t.currentXpath;if(null===(r=t.xParents)||void 0===r?void 0:r.length){for(var g=[],v=[],p=t.xParents.length-1;p>=0;p--){var m=t.xParents[p];if(h=m.currentXpath+h,t.xParents.length-1-p<c.xpathThreshold-1){g.unshift("/".concat(m.tagName));var N=m.id?"#".concat(m.id):"",w=f(m.classList)?"":".".concat(m.classList.join("."));v.unshift("/".concat(N+w||"-"))}}l.unshift.apply(l,i([],n(g),!1)),d.unshift.apply(d,i([],n(v),!1))}var L={skeleton:l.join(""),fullXpath:h,xcontent:d.join("")};return e.xpathCache.set(t,L),L},this._getParent=function(){var t=O(c.originElement);if((null==t?void 0:t.nodeName)&&!D(t)){if(e.parentCache.has(t)){var n=e.parentCache.get(t);if(n.originElement.id===t.id&&n.originElement.className===t.className)return n;e.parentCache.delete(t)}var i=new e(t,c.actionType);return e.parentCache.set(t,i),i}},this.actionType=l(["circleClick","circleHover","click","change"],r)?r:"click";var d=n(function(e,t){if(void 0===t&&(t=20),!e)return[e,!1];for(var n=e,i=0,r=!1;n&&t>i;){i++;var o=n.tagName.toLowerCase();if(!l(h,o)){if(l(y,o)){if(!n.childNodes.length)return[n,r];for(var a=!0,s=0;s<n.childNodes.length;s++){var u=n.childNodes[s];if(u.nodeType!==Node.COMMENT_NODE&&u.nodeType!==Node.TEXT_NODE){a=!1;break}}if(a){var c=O(n);if(c){n=c,r=!0;continue}}}return[n,r]}var d=O(n);if(!d)break;n=d}return[n,r]}(t),2),g=d[0],v=d[1];this.originElement=g,this.isUpgrade=v,this.xpathThreshold=s(o)?o:4,this.isTrackable=S(this.originElement,this.actionType),this.originElement.isSameNode(t)||(u=null);var p=[];u&&u.xNode&&(p.push(u.xNode),u.xNode.xParents&&p.push.apply(p,i([],n(u.xNode.xParents),!1))),this.xNode=new $(this.originElement,this.deviceInfo,this.actionType,this.isTrackable,p)}return e.nodeInfoCache=new WeakMap,e.xpathCache=new WeakMap,e.parentCache=new WeakMap,e}(),J=function(t,n){var i,r,o,a,s,u,c,h=this;this.elements=[],this.trackNodes=function(e,t,n){return void 0===n&&(n=!1),h.elements=[],h._getTrackElements(e,t,null,n),h.elements},this._getTrackElements=function(e,t,n,i){void 0===i&&(i=!1),P(e).forEach((function(e){var r,o,a=null===(r=null==e?void 0:e.tagName)||void 0===r?void 0:r.toLowerCase(),s=(null==e?void 0:e.id)||"";if(a&&!["circle-shape","circle-page","heatmap-page"].includes(a)&&!s.includes("__vconsole")&&!s.includes("__giokit")){var u=new K(e,"circleClick",h.xpathThreshold,h.deviceInfo,n);console.log(u,"-----\x3ecgNode");var c=u.xNode;c.zLevel=h._getZLevel(e,t),u.isTrackable&&(l(["DISPLAYED","OBSCURED"],c.viewStatus)||i)&&(t.index&&(c.index=t.index),h.elements.some((function(e){return e.originNode&&e.originNode.isSameNode(c.originNode)}))||(("DISPLAYED"===c.viewStatus||"OBSCURED"===c.viewStatus&&(c.isContainer||i))&&h.elements.push(h._getGioHybridNodeInfo(u,t)),l(L,e.tagName.toLocaleLowerCase())||c.isContainer&&j(e)||f(P(e))||h._getTrackElements(e,null!==(o=u.xNode)&&void 0!==o?o:t,u,i)))}}))},this.positionZLevelMap={static:1,relative:2,sticky:3,absolute:4,fixed:5},this._getZLevel=function(e,t){var n=window.getComputedStyle(e),i=n.position,r=n.zIndex,o="auto"===r?0:parseInt(r,10)||0;return 0!==o?t.zLevel+o:t.zLevel+(h.positionZLevelMap[i]||1)},this._getGioHybridNodeInfo=function(t,n){var i=t.xNode,r=i.rect,o=i.zLevel,a=t.getGioNodeInfo(i),s=a.hyperlink,u={};return d(r).forEach((function(e){return u[e]=r[e]*h.deviceInfo.scale})),u.top+=h.deviceInfo.webviewTop,u.left+=h.deviceInfo.webviewLeft,e(e(e({},u),a),{zLevel:o+h.deviceInfo.webviewZLevel,href:s,parentXPath:n.isTrackable?t.computeXpath(n).xpath:void 0})},this.xpathThreshold=n,this.deviceInfo=(r=(i=t).webviewLeft,o=i.webviewTop,a=i.webviewWidth,s=i.webviewHeight,u=i.webviewZLevel,c=i.isLimitViewport,{winWidth:a,winHeight:s,scale:a/window.innerWidth,webviewTop:o,webviewLeft:r,webviewWidth:a,webviewHeight:s,webviewZLevel:u,isLimitViewport:c})};export{J as GioHybridNode,K as GioWebNode};
//# sourceMappingURL=index.js.map
